/**
 * jquery.transforming plugin vs 1.0
 * 
 * rotate, scale and skew html elements
 * 
 * (c) 2013 Jochen Renner - mail@script-schmiede.de
 */
(function(i){function j(a,b){this.element=i(a);this.settings=i.extend({},k,b);this.defaults=i.extend({},k,b);if(l){var c=this.element[0];this.element.data("ieprop",{offsetWidth:c.offsetWidth,offsetHeight:c.offsetHeight,position:this.element.position(),isabsolute:this.element.css("position")=="absolute",marginLeft:parseInt(this.element.css("margin-left"))||0,marginTop:parseInt(this.element.css("margin-top"))||0})}this.init(b)}var l=navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)<
5,k={rotate:0,rotateX:0,rotateY:0,rotateZ:0,scale:1,scaleX:1,scaleY:1,skew:0,skewX:0,skewY:0};j.prototype={init:function(a){i.extend(this.settings,a);this.applytransform()},reset:function(){this.element.stop();this.init(this.defaults)},applytransform:l?function(){function a(d,f){return[[d[0][0]*f[0][0]+d[0][1]*f[1][0]+d[0][2]*f[2][0],d[0][0]*f[0][1]+d[0][1]*f[1][1]+d[0][2]*f[2][1],d[0][0]*f[0][2]+d[0][1]*f[1][2]+d[0][2]*f[2][2]],[d[1][0]*f[0][0]+d[1][1]*f[1][0]+d[1][2]*f[2][0],d[1][0]*f[0][1]+d[1][1]*
f[1][1]+d[1][2]*f[2][1],d[1][0]*f[0][2]+d[1][1]*f[1][2]+d[1][2]*f[2][2]],[d[2][0]*f[0][0]+d[2][1]*f[1][0]+d[2][2]*f[2][0],d[2][0]*f[0][1]+d[2][1]*f[1][1]+d[2][2]*f[2][1],d[2][0]*f[0][2]+d[2][1]*f[1][2]+d[2][2]*f[2][2]]]}function b(d){return d*Math.PI/180}var c=this.settings,e=[[1,0,0],[0,1,0],[0,0,1]];if(c.rotate!=0){var g=b(c.rotate),h=Math.sin(g);g=Math.cos(g);e=a(e,[[g,-h,0],[h,g,0],[0,0,1]])}else{if(c.rotateX!=0){g=b(c.rotateX);h=Math.sin(g);g=Math.cos(g);e=a(e,[[1,0,0],[0,g,-h],[0,h,g]])}if(c.rotateY!=
0){g=b(c.rotatY);h=Math.sin(g);g=Math.cos(g);e=a(e,[[g,0,h],[0,1,0],[-h,0,g]])}if(c.rotateZ!=0){g=b(c.rotateZ);h=Math.sin(g);g=Math.cos(g);e=a(e,[[g,-h,0],[h,g,0],[0,0,1]])}}if(c.scale!=1)e=a(e,[[c.scale,0,0],[0,c.scale,0],[0,0,1]]);else{if(c.scaleX!=1)e=a(e,[[c.scaleX,0,0],[0,1,0],[0,0,1]]);if(c.scaleY!=1)e=a(e,[[1,0,0],[0,c.scaleY,0],[0,0,1]])}if(c.skew!=1)e=a(e,[[1,0,0],[Math.tan(b(c.skew)),1,0],[0,0,1]]);else{if(c.skewX!=1)e=a(e,[[1,Math.tan(b(c.skewX)),0],[0,1,0],[0,0,1]]);if(c.skewY!=1)e=a(e,
[[1,0,0],[Math.tan(b(c.skewY)),1,0],[0,0,1]])}c=this.element.data("ieprop");h=this.element[0];h.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+e[0][0]+", M12="+e[0][1]+", M21="+e[1][0]+", M22="+e[1][1]+", sizingMethod='auto expand')";if(c.isabsolute){h.style.left=(c.offsetWidth-h.offsetWidth)/2+c.position.left+"px";h.style.top=(c.offsetHeight-h.offsetHeight)/2+c.position.top+"px"}else{h.style.marginLeft=(c.offsetWidth-h.offsetWidth)/2+c.marginLeft+"px";h.style.marginTop=(c.offsetHeight-
h.offsetHeight)/2+c.marginTop+"px"}}:function(){var a=[],b=this.settings;if(b.rotate!=0)a.push("rotate("+b.rotate+"deg)");else{b.rotateX!=0&&a.push("rotateX("+b.rotateX+"deg)");b.rotateY!=0&&a.push("rotateY("+b.rotateY+"deg)");b.rotateZ!=0&&a.push("rotateZ("+b.rotateZ+"deg)")}if(b.scale!=1)a.push("scale("+b.scale+")");else{b.scaleX!=1&&a.push("scaleX("+b.scaleX+")");b.scaleY!=1&&a.push("scaleY("+b.scaleY+")")}if(b.skew!=0)a.push("skew("+b.skew+"deg)");else{b.skewX!=0&&a.push("skewX("+b.skewX+"deg)");
b.skewY!=0&&a.push("skewY("+b.skewY+"deg)")}a=a.join(" ");this.element.css({"-moz-transform":a,"-webkit-transform":a,"-o-transform":a,"-ms-transform":a,transform:a})},toggle:function(a){var b=this.element.data("toggled-on");b?this.element.transforming("animate",{reverse:1,easingreverse:a.easingreverse||a.easing,durationreverse:a.durationreverse||a.duration}):this.element.transforming("animate",a||this.defaults);this.element.data("toggled-on",!b)},hover:function(a){this.element.on("mouseenter.transforming",
function(){i(this).transforming("animate",a)}).on("mouseleave.transforming",function(){i(this).transforming("animate",{reverse:1,easingreverse:a.easingreverse||a.easing,durationreverse:a.durationreverse||a.duration})})},animate:function(a){if(!a)a=this.defaults;var b=this,c,e;if(a.animateto){c=i.extend({},this.settings);e=a.animateto}else{c=this.defaults;e=i.extend({},this.settings)}b.element.removeClass("transforming-anim-rev transforming-anim");if(a.reverse){var g=e;e=c;c=g;b.element.addClass("transforming-anim-rev");
a.beforeanimateout&&a.beforeanimateout(b.element)}else{b.element.addClass("transforming-anim");a.beforeanimatein&&a.beforeanimatein(b.element)}i.extend(this.settings,c);this.element.stop().css("x-animation",0).animate({"x-animation":1},{easing:a.reverse?a.easingreverse||a.easing||"linear":a.easing||"linear",duration:a.reverse?a.durationreverse||a.duration||1E3:a.duration||1E3,step:function(h){i.each(e,function(d){b.settings[d]=parseFloat(c[d])+h*(parseFloat(e[d])-parseFloat(c[d]))});b.applytransform();
a.step&&a.step(h,b.element)},complete:function(){if(a.reverse){b.element.removeClass("transforming-anim-rev transformed-on").addClass("transformed-default");a.afteranimateout&&a.afteranimateout(b.element)}else{b.element.removeClass("transforming-anim transformed-default").addClass("transformed-on");a.afteranimatein&&a.afteranimatein(b.element)}a.complete&&a.complete(b.element)}})}};i.fn.transforming=function(a,b){return this.each(function(){var c=i.data(this,"plugin-transforming");if(typeof a!="string"){b=
a;a="init"}c||i.data(this,"plugin-transforming",c=new j(this,b));if(c[a])c[a](b||c.defaults)})}})(jQuery,window,document);